<img width="2543" height="1688" alt="Frame 76" src="https://github.com/user-attachments/assets/5f701d98-28d0-403c-a41c-4f3fa00c7895" />

### 1. 프로젝트 배경

#### 1.1. 연구 배경

지속적인 기술 발전은 산업 전반의 **디지털 전환(Digital Transformation)**을 가속화했습니다. 특히 코로나19 팬데믹을 계기로 대면 업무와 현장 중심의 관리 방식이 한계에 부딪히면서, 비대면 서비스, 업무 자동화, 원격 관리에 대한 수요가 폭발적으로 증가했습니다.

이러한 흐름 속에서 제조업, 물류, 공공 인프라 등 다양한 분야에 **IoT(Internet of Things)** 기술이 빠르게 확산되었고, 기기 간 연결과 중앙 집중식 관리의 중요성이 더욱 커졌습니다.

하지만 모든 산업 현장이 이러한 변화를 쉽게 수용한 것은 아닙니다. 여전히 많은 곳에서 **MCU(Microcontroller Unit)** 기반 임베디드 장치가 핵심 역할을 담당하고 있습니다. 이들 기기는 다음과 같은 제약으로 인해 확장성과 유지보수성이 떨어집니다.

- **물리적 접근의 어려움**
- **제한된 메모리 및 저장 공간**
- **낮은 연산 능력**

이로 인해 대규모 장치를 운영하는 환경에서는 체계적인 소프트웨어 업데이트가 어려워 관리 부담이 가중되고 있습니다.

이러한 문제의 핵심 해결책이 바로 **OTA(Over-the-Air)** 기술입니다. OTA는 현장 방문 없이 원격으로 펌웨어와 애플리케이션을 업데이트하여, 수많은 장치를 효율적으로 관리하고 비용을 절감할 수 있게 해줍니다. 디지털 전환 시대에 원격 유지보수는 선택이 아닌 필수가 되었고, OTA는 이제 산업 현장의 핵심 인프라로 자리 잡았습니다.

본 연구는 실제 산업 환경과 유사한 조건에서 운용되는 **대규모 MCU 기반 임베디드 장치**에 적용 가능한 OTA 기술 개발을 목표로 합니다. 단순한 기능 구현을 넘어, 산업 현장에 즉시 도입 가능한 수준의 통합 시스템을 제시하고자 합니다.

특히, **클라우드 기반 관리 플랫폼**을 도입하여 대규모 장치 그룹의 통합 관리에 중점을 둡니다. 클라우드 서버를 통해 운영자는 다음과 같은 작업을 수행하며 수많은 장치를 안정적이고 경제적으로 운용할 수 있습니다.

- **장치 상태 실시간 모니터링**
- **소프트웨어 및 콘텐츠 일괄 배포**
- **원격 제어 및 데이터 수집**

최근 급증하는 IoT 보안 위협에 대응하기 위해, 본 연구는 통신 보안과 시스템 신뢰성 확보를 필수 요건으로 삼습니다. 이를 위해 다음과 같은 **보안 및 안정성 강화 기술**을 제안합니다.

- **mTLS(Mutual TLS) 기반 상호 인증 및 데이터 암호화**
- **배포되는 소프트웨어 및 콘텐츠의 무결성 검증**
- **업데이트 실패 시 자동 롤백(Rollback) 기능**

#### 1.2. 국내외 시장 현황 및 문제점

##### 1.2.1. 기존 MCU 기반 임베디드 시스템의 한계

현재 산업 현장에는 IoT 기능이 없는 전통적인 MCU 기반 시스템이 여전히 많이 사용되고 있습니다. 이러한 시스템은 다음과 같은 명확한 한계를 가집니다.

- **원격 관리 기능 부재**: 네트워크 연결이 없어 원격 제어나 모니터링이 불가능합니다.
- **물리적 접근의 어려움**: 기계실, 옥외 설비 등 접근이 어려운 곳에 설치된 경우가 많습니다.
- **구조적 확장성 한계**: 제한된 성능과 메모리로 인해 기능 개선이 어렵습니다.

이로 인해 유지보수는 **현장 방문**에 의존할 수밖에 없으며, 수백 대의 장치가 분산된 환경에서는 소프트웨어 업데이트 한 번에도 막대한 시간과 인력이 소요됩니다. 결국, 이러한 방식은 대규모 운영 환경에서 **지속 불가능**하며, 보안 패치 지연과 같은 심각한 문제로 이어집니다.

##### 1.2.2. 기존 시스템에 IoT 기능 후속 도입의 어려움

기존 장비 전체를 교체하는 대신, IoT 기능을 추가하려는 시도가 늘고 있습니다. 특히 보일러, 자판기, 음료 디스펜서 등에서 OTA를 통한 펌웨어 및 콘텐츠 업데이트 수요가 빠르게 증가하고 있습니다.

그러나 **저자원(Low-resource) 환경**에서 안정적인 OTA를 지원하기 위한 기술적 기반이 부족하여 다음과 같은 문제가 발생합니다.

- **표준화 부재**: 장치별 구현 방식이 제각각이라 통합 운영이 어렵습니다.
- **관리 효율성 저하**: 통일된 표준이 없어 산업 전반의 효율성을 떨어뜨립니다.

##### 1.2.3. 규모 확장성과 관리 체계의 부족

가정용 IoT 기기는 스마트폰 앱을 통한 소규모 관리가 가능하지만, 수백, 수천 대의 장치를 운영하는 산업용 IoT 시스템은 근본적으로 다릅니다.

산업 환경에서는 **중앙 집중식 관리**와 **자동으로 확장 가능한(Scalable) 아키텍처**가 필수적이지만, 대부분의 기존 시스템은 개별 기기 관리 수준에 머물러 있습니다. 이로 인해 운영자는 장치 상태를 실시간으로 파악하거나 정책을 일괄 적용하기 어려워, 대규모 IoT 시스템 확산에 큰 걸림돌이 되고 있습니다.

##### 1.2.4. 보안 및 신뢰성 확보의 어려움

기존 MCU 기반 장치들은 설계 당시 보안 기능이 거의 고려되지 않았습니다. 네트워크 기능을 나중에 추가하더라도, 데이터 암호화, 장치 인증, 무결성 검증과 같은 필수 보안 요소를 구현하기는 매우 어렵습니다.

그 결과, 장치가 **악성 업데이트**에 감염되거나 **통신 내용이 도청**되는 등 다양한 위협에 쉽게 노출됩니다. 이러한 보안과 신뢰성 문제는 기업이 IoT 및 OTA 기술 도입을 주저하게 만드는 핵심적인 이유입니다.

#### 1.3. 필요성 및 기대효과

본 프로젝트는 앞서 분석한 **MCU 기반 임베디드 시스템의 구조적 한계**와 **대규모 IoT 환경의 관리 부재 문제**를 해결하기 위해 필수적입니다.

##### 필요성

- **운영 효율성 및 비용 절감**: 현장 방문에 의존하는 기존의 수동 업데이트 방식은 막대한 시간과 인력 비용을 유발합니다. 원격으로 수천 대의 장치를 동시에 관리하고 업데이트할 수 있는 중앙 집중형 OTA 시스템은 이러한 비효율을 제거하여 운영 비용을 획기적으로 절감합니다.
- **산업 경쟁력 강화**: 기존에 설치된 레거시 장비에 IoT 기능을 안전하게 추가하고, 최신 상태로 유지할 수 있는 표준화된 솔루션은 기업의 디지털 전환을 가속화합니다. 이를 통해 기업은 노후화된 인프라를 현대화하고 시장 변화에 민첩하게 대응할 수 있습니다.
- **확장 가능한 관리 체계 확보**: 장치 수가 기하급수적으로 증가하는 산업 환경에서, 개별 관리는 더 이상 불가능합니다. 전 세계에 분산된 장치를 단일 플랫폼에서 안정적으로 제어하고 모니터링할 수 있는 확장 가능한 클라우드 기반 관리 체계가 반드시 필요합니다.
- **보안 및 신뢰성 제고**: 사이버 위협에 노출된 기존 시스템의 보안 취약성은 IoT 기술 도입의 가장 큰 장벽입니다. 데이터 암호화, 상호 인증, 무결성 검증, 롤백 기능을 통합한 본 시스템은 산업 현장에서 요구하는 높은 수준의 보안과 신뢰성을 제공합니다.

##### 기대효과

본 클라우드 기반 OTA 관리 시스템 도입을 통해 다음과 같은 효과를 기대할 수 있습니다.

- **경제적 효과**:
  - 유지보수를 위한 현장 출장 비용 및 인건비를 **최소화**합니다.
  - 신규 기능 추가 및 펌웨어 패치를 원격으로 진행하여 장비의 수명을 연장하고 **총소유비용(TCO)을 절감**합니다.

- **운영 효율성 증대**:
  - 단일 관리 콘솔을 통해 전체 장치 상태를 실시간으로 파악하고, **일괄 업데이트**를 통해 관리 시간을 단축합니다.
  - 버그 수정, 보안 패치, 기능 업데이트를 신속하게 배포하여 **서비스 안정성과 고객 만족도를 향상**시킵니다.

- **새로운 비즈니스 기회 창출**:
  - 원격으로 관리되는 장치로부터 수집된 데이터를 분석하여 **새로운 서비스 모델이나 예측 유지보수(Predictive Maintenance)와 같은 부가 가치를 창출**할 수 있는 기반을 마련합니다.
  - 안정적인 대규모 IoT 인프라를 바탕으로, 다양한 산업 분야에 적용 가능한 **플랫폼 비즈니스로의 확장** 가능성을 열어줍니다.

### 2. 개발 목표

#### 2.1. 목표 및 세부 내용

##### 최종 목표

**"대규모 MCU 기반 임베디드 장치를 위한 확장 가능하고 안전한 클라우드 기반 OTA(Over-the-Air) 통합 관리 플랫폼 구축"**

본 프로젝트는 산업 현장에 분산된 수많은 저자원(Low-resource) 임베디드 장치를 중앙에서 효율적으로 원격 관리하는 것을 목표로 합니다. 현장 방문에 의존하던 기존의 비효율적인 유지보수 방식을 탈피하고, **확장성, 안정성, 보안성**을 모두 갖춘 통합 관리 솔루션을 개발합니다.

##### 세부 개발 목표 및 주요 기능

1.  **클라우드 기반 대규모 관리 체계 구축**
    - **중앙 집중식 제어**: 수천 대 이상의 장치를 그룹 단위로 묶어 원격으로 제어하고 정책을 일괄 적용하는 기능.
    - **확장 가능한 아키텍처**: 장치 수 증가에 유연하게 대응할 수 있는 스케일 아웃(Scale-out) 구조의 백엔드 인프라 설계.
    - **직관적인 관리 대시보드**: 운영자가 전체 시스템 현황을 한눈에 파악하고 관리할 수 있는 웹 기반 대시보드 제공.

2.  **안정적인 OTA 업데이트 및 콘텐츠 배포**
    - **저자원 OTA 최적화**: MCU와 같이 메모리와 연산 능력이 제한된 환경에서도 안정적으로 동작하는 OTA 프로세스 구현.
    - **무결성 검증 및 롤백**: 업데이트 파일의 해시(Hash) 검증으로 데이터 변조를 방지하고, 업데이트 실패 시 이전 버전으로 자동 복구(Rollback)하는 기능.
    - **대용량 콘텐츠 배포**: 클라우드 스토리지 및 CDN(Content Delivery Network)을 활용하여 펌웨어뿐만 아니라 광고, UI 리소스 등 대용량 파일도 전 세계에 신속하고 안정적으로 배포.

3.  **강화된 보안 및 시스템 신뢰성 확보**
    - **상호 TLS(mTLS) 인증**: 클라우드 서버와 각 장치 간의 상호 인증을 통해 허가되지 않은 기기의 접근을 원천 차단하고 통신 채널을 암호화.
    - **보안 취약점 방지**: 악성 코드 유입이나 데이터 탈취 등 IoT 환경에서 발생할 수 있는 다양한 보안 위협에 대응하는 견고한 보안 체계 구축.

4.  **실시간 원격 모니터링 및 데이터 수집**
    - **상태 모니터링**: 개별 장치의 네트워크 연결 상태, 동작 현황, OTA 성공 여부 등 주요 지표를 실시간으로 수집.
    - **로그 및 데이터 수집**: 장치에서 발생하는 에러 로그 및 운영 데이터를 클라우드로 전송하여 장애 발생 시 원인을 신속하게 분석하고 대응.

#### 2.2. 기존 서비스 대비 차별성

본 프로젝트는 시중에 존재하는 범용 IoT 플랫폼이나 단순 OTA 라이브러리와 명확한 차별점을 가집니다.

1.  **저자원 MCU 환경에 특화된 통합 솔루션**
    - 기존의 범용 클라우드 IoT 서비스(AWS IoT, Azure IoT Hub 등)는 강력한 기능을 제공하지만, MCU 기반의 저자원 환경에 적용하기에는 무겁고 복잡하며 높은 커스터마이징 비용이 발생합니다.
    - 본 시스템은 **MCU 환경의 제약을 명확히 인지하고, 경량화된 프로토콜과 최적화된 OTA 클라이언트를 포함한 All-in-One 솔루션**을 지향합니다.

2.  **'관리'에 초점을 맞춘 대규모 운영(Fleet Management) 기능**
    - 단순 OTA 라이브러리는 펌웨어 업데이트 기능만 제공할 뿐, 수백, 수천 대의 장치를 체계적으로 관리하는 기능은 부재합니다.
    - 본 프로젝트는 개별 장치 연결을 넘어, **그룹핑, 정책 기반 일괄 업데이트, 중앙 대시보드를 통한 통합 모니터링 등 대규모 장치 '운영'에 필수적인 기능**을 핵심으로 제공합니다.

3.  **산업 현장 수준의 강력한 보안 내재화 (Security by Design)**
    - 많은 IoT 솔루션에서 보안은 선택적 옵션으로 제공되지만, 산업 현장에서는 필수 요건입니다.
    - 본 시스템은 설계 단계부터 보안을 핵심 가치로 설정하여, **mTLS 상호 인증을 기본으로 적용하고 모든 통신과 업데이트 과정의 무결성을 보장**함으로써, 별도의 보안 구축 없이도 신뢰도 높은 시스템을 제공합니다.

4.  **펌웨어를 넘어선 대용량 콘텐츠 배포 지원**
    - 기존 OTA 솔루션은 주로 소용량 펌웨어 업데이트에 국한됩니다.
    - 본 프로젝트는 **CDN 연동을 통해 광고 영상, UI 리소스 등 수십 MB에 달하는 대용량 콘텐츠 파일도 안정적으로 배포**할 수 있어, 디지털 사이니지, 스마트 키오스크 등 다양한 산업 분야로의 확장성이 뛰어납니다.

#### 2.3. 사회적 가치 도입 계획

본 프로젝트는 기술적 성과를 넘어 다음과 같은 사회적 가치 창출에 기여하고자 합니다.

1.  **사회 안전망 강화 및 인프라 효율화**
    - 스마트 가로등, 환경 모니터링 센서, 재난 경보 시스템 등 공공 인프라의 원격 관리 및 상시 업데이트를 가능하게 하여 **국민의 안전을 증진**하고, **도시 운영의 효율성**을 높일 수 있습니다.
    - 특히, 보안이 내재화된 시스템을 통해 공공 인프라에 대한 사이버 공격 위협을 감소시켜 안정적인 서비스 운영을 보장합니다.

2.  **중소기업의 디지털 전환 지원**
    - 대규모 자본 투자가 어려운 중소기업도 저렴한 비용으로 기존 설비를 디지털화하고 원격 관리 체계를 도입할 수 있도록 지원합니다.
    - 이를 통해 **중소기업의 기술 경쟁력을 강화**하고, 대기업과의 디지털 격차를 해소하는 데 기여합니다.

3.  **자원 낭비 절감 및 탄소 배출량 감축 (환경 보호)**
    - 원격 소프트웨어 업데이트를 통해 기존 하드웨어의 수명을 연장함으로써, **불필요한 전자 폐기물(e-waste) 발생을 억제**합니다.
    - 유지보수를 위한 기술자의 **물리적 이동(차량 운행 등)을 최소화**하여, 이동 과정에서 발생하는 탄소 배출량을 줄여 환경 보호에 기여합니다.

### 3. 시스템 설계

#### 3.1. 시스템 구성도

<img width="2416" height="1121" alt="Frame 24" src="https://github.com/user-attachments/assets/aa95ae52-f07a-4bce-a933-25bd62af8453" />

#### 3.2. 사용 기술

| 구분                | 기술        | 버전   | 주요 역할                                       |
| ------------------- | ----------- | ------ | ----------------------------------------------- |
| **프론트엔드**      | React       | 19.0.0 | 관리자 대시보드 UI/UX 구축                      |
|                     | Vite        | 6.2.3  | 프론트엔드 빌드 및 개발 서버                    |
| **백엔드**          | Java        | 17     | 핵심 비즈니스 로직 개발                         |
|                     | Spring Boot | 3.5.3  | Java 기반 백엔드 애플리케이션 프레임워크        |
|                     | Go          | 1.24   | 고성능 동시성 처리 및 특정 API 서버 구축        |
| **데이터베이스**    | MySQL       | 8.0.41 | 장치, 사용자 등 정형 데이터 저장                |
|                     | QuestDB     | 9.0.3  | IoT 장치 시계열 데이터(로그, 모니터링) 저장     |
| **클라우드/인프라** | AWS         | -      | 서버, 데이터베이스 등 클라우드 인프라           |
|                     | Terraform   | 1.11.2 | Infrastructure as Code (IaC)를 통한 인프라 관리 |
| **IoT 기기**        | ESP-IDF     | 4.4.7  | ESP32 MCU 펌웨어 개발 프레임워크                |
|                     | LVGL        | 8.3.3  | 임베디드 장치 GUI 라이브러리                    |

### 4. 개발 결과

#### 4.1. 전체 시스템 흐름도

[3.1. 시스템 구성도와 같음]

#### 4.2. 기능 설명 및 주요 기능 명세서

| 대분류                  | 기능명              | 상세 설명                                                                                       |
| ----------------------- | ------------------- | ----------------------------------------------------------------------------------------------- |
| **펌웨어/콘텐츠 관리**  | 파일 업로드         | 관리자가 신규 펌웨어 또는 콘텐츠를 업로드하기 위해 S3 Presigned URL을 발급받습니다.             |
|                         | 메타데이터 등록     | 업로드된 파일의 버전, 크기, 해시(Hash) 값 등 메타데이터를 등록하여 무결성을 보장합니다.         |
|                         | 목록 조회           | 시스템에 등록된 모든 펌웨어 및 콘텐츠 목록을 조회합니다.                                        |
|                         | 상세 조회           | 특정 펌웨어/콘텐츠의 상세 정보(버전, 릴리즈 노트, 해시 등)를 확인합니다.                        |
|                         | 다운로드 URL 발급   | IoT 기기가 파일을 다운로드할 수 있도록 임시 접근 URL(Signed URL)을 제공합니다.                  |
|                         | 배포 요청           | 특정 펌웨어/콘텐츠를 선택하여 지정된 기기, 그룹, 또는 리전에 배포하도록 요청합니다.             |
|                         | 배포 내역 조회      | 전체 펌웨어 및 콘텐츠 배포 이력을 조회합니다.                                                   |
|                         | 배포 상세 조회      | 특정 배포 건의 진행 상태, 성공/실패 기기 목록 등 세부 현황을 조회합니다.                        |
| **기기·그룹·리전 관리** | 리전별 기기 수 조회 | 각 리전(Region)에 등록된 기기 수를 확인합니다.                                                  |
|                         | 그룹별 기기 수 조회 | 각 그룹(Group)에 등록된 기기 수를 확인합니다.                                                   |
|                         | 기기 현황 조회      | 전체 기기의 기본 현황(이름, 소속 그룹/리전, 활성화 여부 등)을 조회합니다.                       |
|                         | 기기 상세 조회      | 특정 기기의 모든 상세 정보(기본 속성, 설치된 펌웨어, 배포 이력 등)를 조회합니다.                |
|                         | 기기 등록 코드 발급 | 신규 기기를 시스템에 안전하게 등록하기 위한 일회성 인증 코드를 발급합니다.                      |
| **모니터링**            | 기기 상태 모니터링  | 기기의 현재 동작 상태, 네트워크 연결 여부, 마지막 활성 시간 등을 실시간으로 추적합니다.         |
|                         | 데이터 및 로그 수집 | 기기에서 발생하는 운영 데이터와 에러 로그를 클라우드에 수집하여 분석 및 장애 대응에 활용합니다. |

#### 4.3. 디렉토리 구조

```
iot-cloud-ota/
├── backend/          # Spring Boot 기반 API 서버
├── device_simulator/ # Python 기반 IoT 디바이스 시뮬레이터
├── embedded/         # ESP32 임베디드 펌웨어
├── emqx/             # EMQX MQTT 브로커 설정
├── frontend/         # React, Typescript 기반 프론트엔드
├── grafana/          # Grafana 대시보드 및 프로비저닝
├── mqtt-handler/     # Go 기반 MQTT 메시지 핸들러
├── private_ca/       # Private Certificate Authority (CA) 서버
└── terraform/        # Terraform 코드 (인프라 관리)
```

#### 4.4. 산업체 멘토링 의견 및 반영 사항

> 멘토 피드백과 적용한 사례 정리

### 5. 설치 및 실행 방법

#### 5.1. 설치절차 및 실행 방법

##### 클라우드 배포 (Terraform)

대부분의 핵심 서비스 (`backend`, `mqtt-handler`, `emqx`, `private_ca`, `grafana` 등)는 Docker 컨테이너 기반으로 AWS ECS (Elastic Container Service)에 배포되도록 설계되었습니다.

Terraform을 사용하여 전체 인프라와 서비스를 한 번에 배포할 수 있습니다.

1.  `terraform` 디렉토리로 이동합니다.
2.  필요한 경우 `variables.tf` 파일의 변수들을 환경에 맞게 수정합니다.
3.  아래 명령어를 순서대로 실행합니다.

```bash
# Terraform 초기화
terraform init

# 배포 계획 확인
terraform plan

# 인프라 및 서비스 배포
terraform apply
```

##### 로컬 실행 가이드

###### 1. Backend

- **사용 기술/프레임워크**: `Java / Spring Boot / Gradle`
- **설명**: 비즈니스 로직을 처리하는 메인 백엔드 서버입니다.
- **실행 방법**:
  1.  `backend/iot-cloud-ota` 디렉토리로 이동합니다.
  2.  아래 Gradle 명령어를 사용하여 서버를 실행합니다.
      ```bash
      ./gradlew bootRun
      ```
  3.  또는, Docker를 사용하여 로컬에서 실행할 수도 있습니다.

      ```bash
      # Docker 이미지 빌드
      docker build -t iot-cloud-ota-backend .

      # Docker 컨테이너 실행
      docker run -p 8080:8080 iot-cloud-ota-backend
      ```

###### 2. Frontend

- **사용 기술/프레임워크**: `TypeScript / React / Vite`
- **설명**: 사용자에게 보여지는 웹 애플리케이션입니다.
- **실행 방법**:
  1.  `frontend` 디렉토리로 이동합니다.
  2.  `pnpm`을 사용하여 의존성을 설치하고 개발 서버를 실행합니다.

      ```bash
      # 의존성 설치
      pnpm install

      # 개발 서버 실행
      pnpm run dev
      ```

###### 3. MQTT Handler

- **사용 기술/프레임워크**: `Go`
- **설명**: MQTT 메시지를 수신하여 처리하고 데이터베이스에 저장하는 핸들러입니다.
- **실행 방법**:
  1.  `mqtt-handler` 디렉토리로 이동합니다.
  2.  `go run` 명령어를 사용하여 프로그램을 실행합니다.
      ```bash
      go run ./init/main.go
      ```
  3.  또는, Docker를 사용하여 로컬에서 실행할 수 있습니다.

      ```bash
      # Docker 이미지 빌드
      docker build -t mqtt-handler .

      # Docker 컨테이너 실행
      docker run mqtt-handler
      ```

###### 4. Device Simulator

- **사용 기술/프레임워크**: `Python`
- **설명**: OTA 업데이트를 수행하는 IoT 디바이스의 동작을 시뮬레이션합니다.
- **실행 방법**:
  1.  `device_simulator` 디렉토리로 이동합니다.
  2.  Python 가상 환경을 설정하고 의존성을 설치합니다.

      ```bash
      # 가상환경 생성 (최초 1회)
      python3 -m venv venv

      # 가상환경 활성화
      source venv/bin/activate

      # 의존성 설치
      pip install -r requirements.txt
      ```

  3.  `run_simulators.sh` 스크립트를 사용하여 여러 시뮬레이터를 동시에 실행할 수 있습니다.
      ```bash
      # 10개의 시뮬레이터 실행
      ./run_simulators.sh 10
      ```

###### 5. Embedded (ESP32)

- **사용 기술/프레임워크**: `C++ / ESP-IDF`
- **설명**: 실제 IoT 디바이스에서 동작하는 펌웨어입니다. "실행"은 컴파일 후 디바이스에 업로드(Flash)하는 과정을 의미합니다.
- **빌드 및 플래시**:
  1.  `embedded` 디렉토리로 이동합니다.
  2.  ESP-IDF 환경이 설정되었다고 가정하고, 아래 명령어를 사용합니다.

      ```bash
      # 프로젝트 빌드
      idf.py build

      # 디바이스에 펌웨어 업로드 및 모니터링
      # /dev/ttyUSB0 부분은 실제 디바이스 포트에 맞게 변경해야 합니다.
      idf.py -p /dev/ttyUSB0 flash monitor
      ```

###### 6. 기타 서비스 (EMQX, Grafana, Private CA)

- `emqx`, `grafana`, `private_ca` 디렉토리들은 각각 Dockerfile을 포함하고 있습니다.
- 이 서비스들은 클라우드 환경에서는 Terraform에 의해 ECS 서비스로 배포됩니다.
- 로컬에서 개별적으로 실행하려면 각 디렉토리에서 `docker build` 및 `docker run` 명령어를 사용하면 됩니다. 일반적으로 로컬에서는 `docker-compose`를 사용하여 여러 서비스를 함께 관리하는 것이 편리합니다.

#### 5.2. 오류 발생 시 해결 방법

X

### 6. 소개 자료 및 시연 영상

#### 6.1. 프로젝트 소개 자료

[2025포스터_31_커피는생필품_01067872429.pdf](https://github.com/user-attachments/files/22621214/2025._31_._01067872429.pdf)

#### 6.2. 시연 영상

https://youtu.be/4TjecZSbxeg?si=Td5d8iFNOIf9tc2J

### 7. 팀 구성

#### 7.1. 팀원별 소개 및 역할 분담

#### 박준우 [팀장]
- 프론트엔드 개발
  - 관리자 페이지 UI 개발 및 웹 페이지 구현
- 클라우드 인프라 개발
  - AWS ECS를 사용한 MSA아키텍처 구성 및 VPC 구축
  - EMQX, 사설 CA 등 하드웨어-클라우드 통신에 필요한 서비스 구축
  - CI/CD 파이프라인 구축

#### 송승우
- 백엔드 개발
  - Spring Boot를 사용하여 관리자 페이지에 필요한 데이터 전송 API 구현
  - 배포 상태 모니터링과 자동 업데이트를 위한 배치 작업 구성
- MQTT 핸들러 개발 (Golang)
  - 기기와의 안정적인 MQTT 통신을 담당하는 서비스 모듈 구현
  - 경량 스레드(고루틴)을 활용하여 대규모 기기 환경에서도 안정적인 서비스 운영
  - 대규모 기기에서 동시에 발생하는 메시지 송수신을 병렬 처리하여, 대량 트래픽 상황에서도 지연 없이 안정적인 성능 보장

#### 장민준
- IoT 기기 개발
  - 디스플레이/터치/RTC/네트워크 초기화 등 저수준 드라이버 개발
  - FreeRTOS 기반 UI 및 네트워크 병렬 처리 펌웨어 구축
  - LVGL 기반 터치 디스플레이 UI 설계 및 최적화
  - ESP32-S3 기반 OTA(Over-the-Air) 업데이트 및 롤백 기능 구현
  - MQTT/TLS를 통한 클라우드 연동 및 보안 통신 처리
  - Arduino를 포함한 시연용 목업 제품 제작 및 기능 검증

#### 7.2. 팀원 별 참여 후기

##### 박준우
> 약 5개월간 프론트엔드부터 백엔드, 클라우드, 하드웨어까지 아우르는 풀스택 프로젝트를 통해 귀중한 협업 경험을 쌓았습니다. 팀원들과 함께 기술 스택을 선정하고 아키텍처를 설계하며 서비스를 구현해나가는 과정에서 큰 성취감을 느꼈습니다. 특히 대규모 트래픽과 다수의 기기를 상정한 환경 덕분에, 평소 접하기 어려웠던 CDN, ECS, EMQX와 같은 기술들을 실무에 적용하며 기술적 역량을 한 단계 성장시킬 수 있었던 값진 기회였습니다.

##### 송승우
>

##### 장민준
>

### 8. 참고 문헌 및 출처

[1] Prakash Chandrasekaran, K. B. Shibu Kumar, Remish L. Minz, Deepak D'Souza and Lomesh Meshram, "A multi-core version of FreeRTOS verified for datarace and deadlock freedom", ACM and IEEE International Conference on Formal Methods and Models for Co-Design (MEMOCODE), pp. 62-71, Oct. 2014
[2] Nicolas Melot, "Study of an operating system : FreeRTOS", http://wiki.csie.ncku.edu.tw/embedded/FreeRTOS_Melot.pdf
[3] coffee-is-essential, "coffee-driver", https://github.com/coffee-is-essential/coffee-driver
[4] lovyan03, "LovyanGFX", https://github.com/lovyan03/LovyanGFX
[5] TAMCTec, "gt911-arduino", https://github.com/TAMCTec/gt911-arduino
[6] Espressif Systems, "ESP-IDF Getting Started", https://idf.espressif.com/
[7] espressif, "arduino-esp32", https://github.com/espressif/arduino-esp32
